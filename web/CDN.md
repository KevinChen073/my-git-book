# CDN 相关
参考：https://www.jianshu.com/p/b8183c8d04e2
查询：http://tool.chinaz.com/nslookup/
域名 -> 对应的cname或者A记录 -> 到哪一个源站
一般查询就到DNS服务器，但阿里内部有自己的顶级域名DNS服务群，因此嘛。内部服务内部查询。根域名服务器 -> 顶级域名服务器（https://zhuanlan.zhihu.com/p/31568450）

## 一些经历
- CDN有问题导致需要切换域名CName从CDN到源站
- 切换CDN中配置，分批发和切换
- 加入动态加速、加入CDN参数、加入视频动态加速等

## 动态加速&静态加速
- 动态加速，利用节点传输比用户传输快的优势。让用户直接和边缘节点交互，不要直接和源服务进行交互。http://www.sohu.com/a/123282081_582307
- 静态加速，把相关资源先存储一份在CDN。

## cname、A记录是什么
我们都知道DNS是用于记录查询域名和IP之间关系记录的服务器。而这些关系记录会有两种形式，一种是域名和IP之间的关系（A记录），一种是域名与域名之间的关系（CName）。之所以有后者，是因为对一些第三方服务商而言，他可能暴露出的是一个域名CDN加速服务，而这个服务最后对应到哪个机器，哪个域名并不是开发者关心的，因此就需要这么一层CName来对接，让开发者只需要关心服务的域名，服务提供者只需要关心对域名的服务支持。
参考：[WIKI](https://en.wikipedia.org/wiki/CNAME_record)

## 整体链路
URL -> DNS服务器 -> 根DNS服务器 -> 查询记录（CName或者A记录） -> 查找到相关IP（回源） -> 返回数据到节点或者客户 -> TTFB -> DOMContentLoaded